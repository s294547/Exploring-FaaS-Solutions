{{- if .Capabilities.APIVersions.Has "keycloak.org/v1alpha1/KeycloakClient" }}
apiVersion: keycloak.org/v1alpha1
kind: KeycloakClient
metadata:
  name: grafana
  labels: {{ include "grafana.app.labels" . | nindent 4 }}
    app.kubernetes.io/component: grafana
    user-action-pod: "true"
    name: grafana
spec:
  realmSelector:
    matchLabels:
      app: keycloak
  roles: []
  client:
    clientId: grafana
    protocol: openid-connect
    defaultRoles: []
    redirectUris:
    - "https://grafana.{{ .Release.Namespace }}.{{ .Values.global.domain_name }}/*"
    webOrigins:
    - "https://grafana.{{ .Release.Namespace }}.{{ .Values.global.domain_name }}/*"
    standardFlowEnabled: true
    directAccessGrantsEnabled: true
    rootUrl: "https://grafana.{{ .Release.Namespace }}.{{ .Values.global.domain_name }}"
    adminUrl: "https://grafana.{{ .Release.Namespace }}.{{ .Values.global.domain_name }}"
    defaultClientScopes:
    - email
    - profile
{{- end }}
